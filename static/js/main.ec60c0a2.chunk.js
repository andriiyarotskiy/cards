(this.webpackJsonpfriday=this.webpackJsonpfriday||[]).push([[0],{104:function(e,a,t){e.exports=t(135)},109:function(e,a,t){},110:function(e,a,t){},135:function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),s=t(8),o=t.n(s),l=(t(109),t(110),t(28)),i=t(13),c=function(){return n.a.createElement(n.a.Fragment,null)},u=t(62),m=t.n(u),d=t(14),p=t(37),g=t.n(p),E=t(47),f=t(19),b=t(86),h=t.n(b).a.create(Object(f.a)({baseURL:"https://neko-back.herokuapp.com/2.0/"},{withCredentials:!0})),w=function(e){return h.post("auth/login",e)},v=function(e){return h.post("auth/register",e)},P=function(e){return h.post("auth/forgot",e)},S=function(e){return h.post("auth/set-new-password",e)},O=function(){return h.post("auth/me",{})},y=function(){return h.delete("auth/me",{})},I=function(e){return{type:"login/SET-IS-LOGGED-IN",value:e}},T=function(e){return{type:"SET-STATUS-PROGRESS",progress:e}},j={isAuth:!1,progress:"idle"},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"login/SET-IS-LOGGED-IN":return Object(f.a)({},e,{isAuth:a.value});case"SET-STATUS-PROGRESS":return Object(f.a)({},e,{progress:a.progress});default:return e}},k={userData:{email:"",name:""},isInitialized:!0},N=function(e){return{type:"SET-PROFILE-DATA",userData:e}},A=function(e){return{type:"USER-INITIALIZED",isInitialized:e}},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET-PROFILE-DATA":return Object(f.a)({},e,{userData:a.userData});case"USER-INITIALIZED":return Object(f.a)({},e,{isInitialized:a.isInitialized});default:return e}},_=t(164),C=t(168),D=function(){var e=Object(d.c)((function(e){return e.profile.isInitialized})),a=Object(d.c)((function(e){return e.login.isAuth})),t=Object(d.c)((function(e){return e.profile.userData})),s=Object(d.b)();Object(r.useEffect)((function(){s(function(){var e=Object(E.a)(g.a.mark((function e(a){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a(A(!0)),e.next=4,O();case 4:t=e.sent,a(N(t.data)),a(I(!0)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0.response.data.error);case 12:a(A(!1));case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(a){return e.apply(this,arguments)}}())}),[s]);return e?n.a.createElement("div",{style:{position:"fixed",top:"0",textAlign:"center",width:"100%"}},n.a.createElement(_.a,null)):a?n.a.createElement("div",{className:m.a.mainBlock},n.a.createElement("div",{className:"container"},n.a.createElement("h1",{className:m.a.title},"Main page"),n.a.createElement("h3",null,t.name),n.a.createElement(C.a,{onClick:function(){s(function(){var e=Object(E.a)(g.a.mark((function e(a){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a(A(!0)),e.next=4,y();case 4:t=e.sent,console.log(t.data.info),a(I(!1)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0.response.data.error);case 12:a(A(!1));case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(a){return e.apply(this,arguments)}}())},variant:"contained",color:"primary"},"Log Out"))):n.a.createElement(i.a,{to:"/authPage/login"})},F=t(174),W=t(172),L=t(173),q=t(169),G=t(32),U=t(181),Z=t(136),z=t(176),M=t(170),B=t(178),V=t(180),$=t(92),H=t.n($),J=t(67),K=t.n(J),Q=t(177),Y=function(e){var a=e.progress,t=e.classes,r=Object(d.b)(),s=Object(G.a)({initialValues:{email:"",password:"",rememberMe:!1},validate:function(e){var a={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(a.email="Invalid email address"):a.email="Required",e.password?e.password.length<7&&(a.password="Password > 7 symbols"):a.password="Required",a},onSubmit:function(e){var a;r((a=e,function(e){e(T("loading")),w(a).then((function(a){e(I(!0)),e(N(a.data)),e(T("succeeded"))})).catch((function(a){a.response?a.response.data.error:a.message,console.log("Error",Object(f.a)({},a)),e(T("failed"))}))}))}}),o=function(e,a){"clickaway"!==a&&r(T("idle"))},i="failed"===a;return n.a.createElement(n.a.Fragment,null,n.a.createElement(U.a,{className:t.avatar},n.a.createElement(H.a,null)),n.a.createElement(Z.a,{component:"h1",variant:"h5"},"Sign in"),n.a.createElement("div",{className:K.a.loginPage},n.a.createElement("form",{onSubmit:s.handleSubmit,className:t.form},n.a.createElement(z.a,Object.assign({variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0},s.getFieldProps("email"),{helperText:n.a.createElement("span",{style:{color:"red",position:"absolute"}},s.errors.email)})),n.a.createElement(z.a,Object.assign({variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"},s.getFieldProps("password"),{helperText:n.a.createElement("span",{style:{color:"red",position:"absolute"}},s.errors.password)})),n.a.createElement(M.a,{control:n.a.createElement(B.a,Object.assign({},s.getFieldProps("rememberMe"),{color:"primary"})),label:"Remember me"}),n.a.createElement(C.a,{disabled:function(){if("loading"===a||!s.values.email||!s.values.password)return!0}(),type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit},"Sign In"),n.a.createElement(W.a,{container:!0},n.a.createElement(W.a,{item:!0,xs:!0},n.a.createElement(l.b,{to:"/authPage/forgotPassword"},"Forgot password?")),n.a.createElement(W.a,{item:!0},n.a.createElement(l.b,{to:"/authPage/registration"},"Don't have an account? Sign Up"))),n.a.createElement(V.a,{className:K.a.snackbarItem,open:i,autoHideDuration:4e3,onClose:o},n.a.createElement(Q.a,{onClose:o,severity:"error"},"This is a Error message!")))))},X={isLoggedIn:!1,error:null,loaderStatus:"idle"},ee=function(e){return{type:"SET-ERROR-REGISTRATION",error:e}},ae=function(e){return{type:"SET-REQUEST-STATUS",loaderStatus:e}},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET-IS-LOGGED-IN":return Object(f.a)({},e,{isLoggedIn:!0});case"SET-ERROR-REGISTRATION":return Object(f.a)({},e,{error:a.error});case"SET-REQUEST-STATUS":return Object(f.a)({},e,{loaderStatus:a.loaderStatus});default:return e}},re=t(59),ne=t.n(re),se=t(30),oe=t.n(se),le=function(e){var a={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(a.email="Invalid email address"):a.email="Required",e.password?e.password.length<7?a.password="Password must be 8 characters or more":e.repeatPassword?e.repeatPassword!==e.password&&(a.password="Your passwords are not equal",a.repeatPassword="Your passwords are not equal"):a.repeatPassword="Please repeat you password":a.password="Enter you password",a},ie=function(e){var a=e.classes,t=Object(d.b)(),r=Object(d.c)((function(e){return e.registration})),s=r.isLoggedIn,o=r.error,l=r.loaderStatus,c=Object(G.a)({initialValues:{email:"",password:"",repeatPassword:""},validate:le,onSubmit:function(e){var a,r=e.email,n=e.password;t((a={email:r,password:n},function(){var e=Object(E.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(ae("loading")),e.prev=1,e.next=4,v(a);case 4:t({type:"SET-IS-LOGGED-IN"}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),t(ee(e.t0.response.data.error));case 10:return e.prev=10,t(ae("idle")),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[1,7,10,13]])})));return function(a){return e.apply(this,arguments)}}()))}}),u=null!==o,m=function(e){c.setTouched({},!1)},p=!(!c.touched.email||!c.errors.email),f=!(!c.touched.password||!c.errors.password),b=!(!c.touched.repeatPassword||!c.errors.repeatPassword);return s?n.a.createElement(i.a,{to:"/authPage/login"}):n.a.createElement(n.a.Fragment,null,"loading"===l&&n.a.createElement(_.a,null),n.a.createElement(U.a,{className:a.avatar}),n.a.createElement(Z.a,{component:"h1",variant:"h5"},"Sign up"),n.a.createElement("form",{onSubmit:c.handleSubmit,className:a.form},n.a.createElement("div",{className:oe.a.customInput},n.a.createElement(z.a,Object.assign({variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",onKeyPress:m,error:p,helperText:n.a.createElement("span",{style:{color:"red",position:"absolute"}},c.errors.email)},c.getFieldProps("email"))),p?n.a.createElement("div",{className:oe.a.iconError},n.a.createElement(ne.a,{color:"secondary"})):null),n.a.createElement("div",{className:oe.a.customInput},n.a.createElement(z.a,Object.assign({variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",onKeyPress:m,id:"password",autoComplete:"current-password",error:f},c.getFieldProps("password"),{helperText:n.a.createElement("span",{style:{color:"red",position:"absolute"}},c.errors.password)})),f?n.a.createElement("div",{className:oe.a.iconError},n.a.createElement(ne.a,{color:"secondary"})):null),n.a.createElement("div",{className:oe.a.customInput},n.a.createElement(z.a,Object.assign({variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Repeat Password",type:"password",id:"repeatPassword",autoComplete:"current-password",name:"repeatPassword",onKeyPress:m,error:b,helperText:n.a.createElement("span",{style:{color:"red",position:"absolute"}},c.errors.repeatPassword)},c.getFieldProps("repeatPassword"))),b&&f?n.a.createElement("div",{className:oe.a.iconError},n.a.createElement(ne.a,{color:"secondary"})):null),n.a.createElement(C.a,{disabled:"loading"===l,type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit},"Sign Up"),n.a.createElement("div",{className:oe.a.snackBarContainer},n.a.createElement(V.a,{className:oe.a.snackbarItem,open:u,autoHideDuration:5e3,onClose:function(e,a){"clickaway"!==a&&t(ee(null))}},n.a.createElement(Q.a,{variant:"filled",severity:"error"},o)))))},ce={email:""},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"FORGOT-PASSWORD":return Object(f.a)({},e,{email:a.value});default:return e}},me=t(68),de=t.n(me),pe=function(e){var a=e.classes,t=Object(d.b)(),r=Object(d.c)((function(e){return e.login.progress})),s=Object(G.a)({initialValues:{email:"",from:"test-front-admin <artem_ermakov_1999@mail.ru>",message:"<div>password recovery link: <a href='http://localhost:3000/#/passwordChange/$token$'>TAP TAP TAP</a></div>"},validate:function(e){var a={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(a.email="Invalid email address"):a.email="Required",a},onSubmit:function(e){var a;t((a=e,function(e){e(T("loading")),P(a).then((function(a){console.log(a.data.info),e(T("succeeded"))})).catch((function(a){console.log(a),e(T("failed"))}))})),s.resetForm()}}),o=function(e,a){"clickaway"!==a&&t(T("idle"))},l="succeeded"===r;return n.a.createElement(n.a.Fragment,null,"loading"===r?n.a.createElement(_.a,null):null,n.a.createElement(U.a,{className:a.avatar}),n.a.createElement(Z.a,{component:"h1",variant:"h5"},"Restore Password"),n.a.createElement("form",{onSubmit:s.handleSubmit,className:a.form},n.a.createElement("div",{className:de.a.forgotPass},n.a.createElement(z.a,Object.assign({variant:"outlined",margin:"normal",required:!0,fullWidth:!0,autoFocus:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email"},s.getFieldProps("email"))),n.a.createElement(C.a,{disabled:function(){if("loading"===r)return!0}(),type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit},"Restore password"),n.a.createElement(V.a,{className:de.a.snackbarItem,open:l,autoHideDuration:4e3,onClose:o},n.a.createElement(Q.a,{onClose:o,severity:"success"},"This is a success message!")))))},ge=function(){var e=Ee(),a=Object(d.c)((function(e){return e.login.isAuth})),t=Object(d.c)((function(e){return e.login.progress}));return a?n.a.createElement(i.a,{to:"/"}):n.a.createElement(n.a.Fragment,null,"loading"===t?n.a.createElement(_.a,null):null,n.a.createElement(W.a,{container:!0,component:"main",className:e.root},n.a.createElement(L.a,null),n.a.createElement(W.a,{item:!0,xs:!1,sm:4,md:7,className:e.image}),n.a.createElement(W.a,{item:!0,xs:12,sm:8,md:5,component:q.a,elevation:6,square:!0},n.a.createElement("div",{className:e.paper},n.a.createElement(i.d,null,n.a.createElement(i.b,{exact:!0,path:"/authPage/login",render:function(){return n.a.createElement(Y,{progress:t,classes:e})}}),n.a.createElement(i.b,{path:"/authPage/registration",render:function(){return n.a.createElement(ie,{classes:e})}}),n.a.createElement(i.b,{path:"/authPage/forgotPassword",render:function(){return n.a.createElement(pe,{classes:e})}}))))))},Ee=Object(F.a)((function(e){return{root:{height:"100vh"},image:{backgroundImage:"url(https://source.unsplash.com/random)",backgroundRepeat:"no-repeat",backgroundColor:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),fe=t(175),be={password:"",setPassword:!1,isCorrectPass:!1},he=function(e){return{type:"IS-CORRECT-PASSWORD",isCorrect:e}},we=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET-PASSWORD":return Object(f.a)({},e,{setPassword:a.isSet});case"IS-CORRECT-PASSWORD":return Object(f.a)({},e,{isCorrectPass:a.isCorrect});default:return e}},ve=function(){var e=Pe(),a=Object(d.c)((function(e){return e.changePassword})),t=a.isCorrectPass,r=a.setPassword,s=Object(d.b)(),o=Object(i.g)().token;console.log(t);var l=Object(G.a)({initialValues:{password:"",resetPasswordToken:o},validate:function(e){var a={};return e.password?e.password.length<7&&(a.password="Password > 7 symbols"):a.password="Required",a},onSubmit:function(e){var a;s((a=e,function(e){e(T("loading")),e(he(!0)),S(a).then((function(a){console.log(a.data),e({type:"SET-PASSWORD",isSet:!0}),e(he(!1)),e(T("succeeded"))})).catch((function(a){e(T("failed")),console.log(a)}))})),console.log(e)}});return r?n.a.createElement(i.a,{to:"/"}):n.a.createElement(n.a.Fragment,null,t?n.a.createElement(_.a,null):null,n.a.createElement(fe.a,{component:"main",maxWidth:"xs"},n.a.createElement(L.a,null),n.a.createElement("div",{className:e.paper},n.a.createElement(U.a,{className:e.avatar}),n.a.createElement(Z.a,{component:"h1",variant:"h5"},"Change Password"),n.a.createElement("form",{onSubmit:l.handleSubmit,className:e.form},n.a.createElement(z.a,Object.assign({variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"},l.getFieldProps("password"),{helperText:n.a.createElement("span",{style:{color:"red",position:"fixed"}},l.errors.password)})),n.a.createElement(C.a,{disabled:t,type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit},"change password")))))},Pe=Object(F.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),Se=function(){return n.a.createElement("div",{className:"App"},n.a.createElement(l.a,null,n.a.createElement(c,null),n.a.createElement(i.d,null,n.a.createElement(i.b,{exact:!0,path:"/",render:function(){return n.a.createElement(D,null)}}),n.a.createElement(i.b,{path:"/authPage",render:function(){return n.a.createElement(ge,null)}}),n.a.createElement(i.b,{path:"/passwordChange/:token",render:function(){return n.a.createElement(ve,null)}}))))},Oe=t(42),ye=t(93),Ie=Object(Oe.c)({profile:x,login:R,registration:te,changePassword:we,forgotPassword:ue}),Te=Object(Oe.d)(Ie,Object(Oe.a)(ye.a));window.store=Te,o.a.render(n.a.createElement(d.a,{store:Te},n.a.createElement(Se,null)),document.getElementById("root"))},30:function(e,a,t){e.exports={snackBarContainer:"Registration_snackBarContainer__2wOL7",snackbarItem:"Registration_snackbarItem__3M2WM",customInput:"Registration_customInput__2PPe3",iconError:"Registration_iconError__QLFVJ"}},62:function(e,a,t){e.exports={title:"Profile_title__12_Ys"}},67:function(e,a,t){e.exports={loginPage:"Login_loginPage__2MDjz",snackbarItem:"Login_snackbarItem__153nP"}},68:function(e,a,t){e.exports={forgotPass:"ForgotPassword_forgotPass__3-0ur",snackbarItem:"ForgotPassword_snackbarItem__15isM"}}},[[104,1,2]]]);
//# sourceMappingURL=main.ec60c0a2.chunk.js.map